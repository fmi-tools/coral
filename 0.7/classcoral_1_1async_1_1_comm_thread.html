<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>coral: coral::async::CommThread&lt; StackData &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">coral
   </div>
   <div id="projectbrief">A C++ library for distributed co-simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>coral</b></li><li class="navelem"><a class="el" href="namespacecoral_1_1async.html">async</a></li><li class="navelem"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcoral_1_1async_1_1_comm_thread-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">coral::async::CommThread&lt; StackData &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Creates and controls a background communications thread.  
 <a href="classcoral_1_1async_1_1_comm_thread.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="async_8hpp_source.html">coral/async.hpp</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1322602800dba6ad64c3f41f7fae1e4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a1322602800dba6ad64c3f41f7fae1e4f">CommThread</a> ()</td></tr>
<tr class="memdesc:a1322602800dba6ad64c3f41f7fae1e4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the background thread.  <a href="#a1322602800dba6ad64c3f41f7fae1e4f">More...</a><br /></td></tr>
<tr class="separator:a1322602800dba6ad64c3f41f7fae1e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb0cf21bb7f8c38028140cd164a48b86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#afb0cf21bb7f8c38028140cd164a48b86">~CommThread</a> () CORAL_NOEXCEPT</td></tr>
<tr class="memdesc:afb0cf21bb7f8c38028140cd164a48b86"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="classcoral_1_1async_1_1_comm_thread.html" title="Creates and controls a background communications thread. ">CommThread</a> object is still active, shuts down the background thread and waits for it to terminate.  <a href="#afb0cf21bb7f8c38028140cd164a48b86">More...</a><br /></td></tr>
<tr class="separator:afb0cf21bb7f8c38028140cd164a48b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b179b4ff78bc6e9b9c3cf21988629d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a4b179b4ff78bc6e9b9c3cf21988629d6">CommThread</a> (<a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a> &amp;&amp;other) CORAL_NOEXCEPT</td></tr>
<tr class="memdesc:a4b179b4ff78bc6e9b9c3cf21988629d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructor.  <a href="#a4b179b4ff78bc6e9b9c3cf21988629d6">More...</a><br /></td></tr>
<tr class="separator:a4b179b4ff78bc6e9b9c3cf21988629d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc302077222efbdde0eb78da3b905c7b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#acc302077222efbdde0eb78da3b905c7b">operator=</a> (<a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a> &amp;&amp;other) CORAL_NOEXCEPT</td></tr>
<tr class="memdesc:acc302077222efbdde0eb78da3b905c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assignment operator.  <a href="#acc302077222efbdde0eb78da3b905c7b">More...</a><br /></td></tr>
<tr class="separator:acc302077222efbdde0eb78da3b905c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a30596c99d461c7c00b18e8512434b0"><td class="memTemplParams" colspan="2">template&lt;typename Result &gt; </td></tr>
<tr class="memitem:a3a30596c99d461c7c00b18e8512434b0"><td class="memTemplItemLeft" align="right" valign="top"><a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/future.html">std::future</a>&lt; Result &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a3a30596c99d461c7c00b18e8512434b0">Execute</a> (typename <a class="el" href="structcoral_1_1async_1_1_comm_thread_task.html">CommThreadTask</a>&lt; StackData, Result &gt;::Type task)</td></tr>
<tr class="memdesc:a3a30596c99d461c7c00b18e8512434b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a task asynchronously in the background thread.  <a href="#a3a30596c99d461c7c00b18e8512434b0">More...</a><br /></td></tr>
<tr class="separator:a3a30596c99d461c7c00b18e8512434b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec8ed3c6b46a1c2dd9576c9418c75b6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d">Shutdown</a> ()</td></tr>
<tr class="memdesc:aec8ed3c6b46a1c2dd9576c9418c75b6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the background thread in a controlled manner.  <a href="#aec8ed3c6b46a1c2dd9576c9418c75b6d">More...</a><br /></td></tr>
<tr class="separator:aec8ed3c6b46a1c2dd9576c9418c75b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0736323441fc565dfc11abaad451302f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f">Active</a> () const CORAL_NOEXCEPT</td></tr>
<tr class="memdesc:a0736323441fc565dfc11abaad451302f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the <a class="el" href="classcoral_1_1async_1_1_comm_thread.html" title="Creates and controls a background communications thread. ">CommThread</a> object is active.  <a href="#a0736323441fc565dfc11abaad451302f">More...</a><br /></td></tr>
<tr class="separator:a0736323441fc565dfc11abaad451302f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename StackData&gt;<br />
class coral::async::CommThread&lt; StackData &gt;</h3>

<p>Creates and controls a background communications thread. </p>
<p>The constructor of this class creates a new thread whose lifetime is tied to that of the constructed object (i.e., the destructor will wait for the background thread to complete before returning.) This thread can be used to execute arbitrary code, but its primary design purpose is to run event-based communications code based on <a class="el" href="classcoral_1_1net_1_1_reactor.html" title="An implementation of the reactor pattern. ">coral::net::Reactor</a>. The thread therefore has a dedicated <code>Reactor</code> object, a reference to which is passed to all functions that are executed in it.</p>
<p>To execute tasks in the background thread, use the <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a3a30596c99d461c7c00b18e8512434b0" title="Executes a task asynchronously in the background thread. ">Execute()</a> method. Results and exceptions from such functions should be transferred to the foreground thread using the <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/future.html">std::future</a> / <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/promise.html">std::promise</a> mechanism.</p>
<p>The background thread may have a dedicated object of type <code>StackData</code>. This is located on that thread's stack, and can be used to hold objects persistently across <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a3a30596c99d461c7c00b18e8512434b0" title="Executes a task asynchronously in the background thread. ">Execute()</a> calls. The <code>StackData</code> object does not move in memory, and its lifetime ends before that of the <code>Reactor</code>. A reference to this object is passed to each function that is executed in the background thread. <code>StackData</code> may be <code>void</code>, in which case no object is ever created, and no reference is passed to the executed functions.</p>
<p>Any exceptions that are <em>thrown</em> in the background thread (as opposed to being reported using a promise) will cause the thread to terminate. This is true both for exceptions that escape functions which are executed with <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a3a30596c99d461c7c00b18e8512434b0" title="Executes a task asynchronously in the background thread. ">Execute()</a> and for those thrown in code which is executed indirectly as a result of reactor events. If this happens, a subsequent call to <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a3a30596c99d461c7c00b18e8512434b0" title="Executes a task asynchronously in the background thread. ">Execute()</a> or <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d" title="Terminates the background thread in a controlled manner. ">Shutdown()</a> will throw a <a class="el" href="classcoral_1_1async_1_1_comm_thread_dead.html" title="An exception that signals an error that has caused CommThread&#39;s background thread to terminate unexpe...">CommThreadDead</a> exception. The original exception can be obtained from this object.</p>
<p>After construction, the <a class="el" href="classcoral_1_1async_1_1_comm_thread.html" title="Creates and controls a background communications thread. ">CommThread</a> object is in the "active" state, where <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f" title="Returns whether the CommThread object is active. ">Active()</a> returns <code>true</code>. It remains in this state until one of the following happens, after which it is "inactive" and <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f" title="Returns whether the CommThread object is active. ">Active()</a> returns <code>false</code>:</p>
<ul>
<li><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d" title="Terminates the background thread in a controlled manner. ">Shutdown()</a> is called to perform a controlled shutdown of the background thread.</li>
<li><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a3a30596c99d461c7c00b18e8512434b0" title="Executes a task asynchronously in the background thread. ">Execute()</a> or <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d" title="Terminates the background thread in a controlled manner. ">Shutdown()</a> throws <a class="el" href="classcoral_1_1async_1_1_comm_thread_dead.html" title="An exception that signals an error that has caused CommThread&#39;s background thread to terminate unexpe...">CommThreadDead</a> because the background thread has terminated due to an unexpected exception.</li>
<li>The object is moved from, i.e., it is used as the source for a move construction or move assignment operation.</li>
</ul>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">StackData</td><td>The type used for an object that holds stack data persistently across function calls in the background thread, or <code>void</code> if no such object is needed. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1322602800dba6ad64c3f41f7fae1e4f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StackData &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html">coral::async::CommThread</a>&lt; StackData &gt;::<a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the background thread. </p>
<dl class="section post"><dt>Postcondition</dt><dd><code><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f" title="Returns whether the CommThread object is active. ">Active()</a> == true</code> </dd></dl>

</div>
</div>
<a class="anchor" id="afb0cf21bb7f8c38028140cd164a48b86"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StackData &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html">coral::async::CommThread</a>&lt; StackData &gt;::~<a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the <a class="el" href="classcoral_1_1async_1_1_comm_thread.html" title="Creates and controls a background communications thread. ">CommThread</a> object is still active, shuts down the background thread and waits for it to terminate. </p>
<p>The destructor calls <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d" title="Terminates the background thread in a controlled manner. ">Shutdown()</a> to terminate the thread, but it will silently ignore any exceptions thrown by that function. Therefore, it is usually recommended to call <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d" title="Terminates the background thread in a controlled manner. ">Shutdown()</a> manually before destruction, in order to catch any errors that might have occurred in the background thread. </p>

</div>
</div>
<a class="anchor" id="a4b179b4ff78bc6e9b9c3cf21988629d6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StackData &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html">coral::async::CommThread</a>&lt; StackData &gt;::<a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a>&lt; StackData &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move constructor. </p>
<dl class="section post"><dt>Postcondition</dt><dd><code>other.Active() == false</code> </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0736323441fc565dfc11abaad451302f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StackData &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classcoral_1_1async_1_1_comm_thread.html">coral::async::CommThread</a>&lt; StackData &gt;::Active </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns whether the <a class="el" href="classcoral_1_1async_1_1_comm_thread.html" title="Creates and controls a background communications thread. ">CommThread</a> object is active. </p>
<p>If this function returns <code>false</code>, there is no background thread associated with this object. It may have been terminated, or ownership of it may have been transferred to another <a class="el" href="classcoral_1_1async_1_1_comm_thread.html" title="Creates and controls a background communications thread. ">CommThread</a> object by a move operation.</p>
<p>The converse is not necessarily true, however: Even if <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f" title="Returns whether the CommThread object is active. ">Active()</a> returns <code>true</code>, the thread may still have terminated due to an exception. The only way to discover whether this is the case is to attempt to run <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a3a30596c99d461c7c00b18e8512434b0" title="Executes a task asynchronously in the background thread. ">Execute()</a> or <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d" title="Terminates the background thread in a controlled manner. ">Shutdown()</a> and see if <a class="el" href="classcoral_1_1async_1_1_comm_thread_dead.html" title="An exception that signals an error that has caused CommThread&#39;s background thread to terminate unexpe...">CommThreadDead</a> is thrown. If this happens, <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f" title="Returns whether the CommThread object is active. ">Active()</a> will return <code>false</code> afterwards. </p>

</div>
</div>
<a class="anchor" id="a3a30596c99d461c7c00b18e8512434b0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StackData &gt; </div>
<div class="memtemplate">
template&lt;typename Result &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/future.html">std::future</a>&lt; Result &gt; <a class="el" href="classcoral_1_1async_1_1_comm_thread.html">coral::async::CommThread</a>&lt; StackData &gt;::Execute </td>
          <td>(</td>
          <td class="paramtype">typename <a class="el" href="structcoral_1_1async_1_1_comm_thread_task.html">CommThreadTask</a>&lt; StackData, Result &gt;::Type&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes a task asynchronously in the background thread. </p>
<p>This function returns a <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/future.html">std::future</a> that shares its state with the <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/promise.html">std::promise</a> object passed to the <code>task</code> function. The promise should be used to report results or errors. This may be done immediately, in the body of the <code>task</code> function, or it may be done at a later time by registering a reactor event.</p>
<p>A reference to the background thread's <a class="el" href="classcoral_1_1net_1_1_reactor.html" title="An implementation of the reactor pattern. ">coral::net::Reactor</a> object is also passed to <code>task</code>. Do <em>not</em> call <a class="el" href="classcoral_1_1net_1_1_reactor.html#a2dc8ca319098959e79ae8a7b9acd4074" title="Stops the messaging loop. ">coral::net::Reactor::Stop()</a> on this object to terminate the thread; this will lead to unspecified behaviour. Instead, use <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d" title="Terminates the background thread in a controlled manner. ">Shutdown()</a> to terminate the thread in a controlled manner.</p>
<p>Finally, if the type parameter <code>StackData</code> is not <code>void</code>, the function also receives a reference to an object of the given type. This object is located on the background thread's stack, and thus persists across function calls.</p>
<p>See <a class="el" href="structcoral_1_1async_1_1_comm_thread_task.html" title="Contains the Type member alias, which defines the signature for functions executed asynchronously by ...">CommThreadTask</a> for more information about the type and signature of the <code>task</code> function.</p>
<p>Any exceptions that are thrown and allowed to escape from <code>task</code> will cause the background thread to terminate, and a subsequent call to <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a3a30596c99d461c7c00b18e8512434b0" title="Executes a task asynchronously in the background thread. ">Execute()</a> or <a class="el" href="classcoral_1_1async_1_1_comm_thread.html#aec8ed3c6b46a1c2dd9576c9418c75b6d" title="Terminates the background thread in a controlled manner. ">Shutdown()</a> will throw a <a class="el" href="classcoral_1_1async_1_1_comm_thread_dead.html" title="An exception that signals an error that has caused CommThread&#39;s background thread to terminate unexpe...">CommThreadDead</a> exception, rendering the <a class="el" href="classcoral_1_1async_1_1_comm_thread.html" title="Creates and controls a background communications thread. ">CommThread</a> object in an inactive state.</p>
<dl class="section warning"><dt>Warning</dt><dd>Visual Studio versions prior to 2015 do not handle <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/promise.html">std::promise</a> destruction correctly. Specifically, a destroyed <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/promise.html">std::promise</a> does not cause a "broken promise" error to be thrown by its corresponding <code><a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/future.html">std::future</a></code>. Thus, if an exception is thrown in the background thread when there are any unfulfilled promises, calls to <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/future/get.html">std::future::get()</a> will block indefinitely.</dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Result</td><td>The type of the function's "return value". The function will receive an object of type <code><a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/promise.html">std::promise</a>&lt;Result&gt;</code> which it can use to return the value (or an exception). <code>Result</code> may be <code>void</code>, in which case the promise is simply used to report whether the task was completed successfully. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task</td><td>A function to be executed in the background thread. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/future.html">std::future</a> object that shares state with the <a class="elRef" doxygen="C:/Users/larky/Development/viproma/coral-super/releases/temp/coral_0.7.1_win32-msvc12-Release/coral-prefix/src/coral/cmake/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/thread/promise.html">std::promise</a> passed to the <code>task</code> function. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classcoral_1_1async_1_1_comm_thread_dead.html" title="An exception that signals an error that has caused CommThread&#39;s background thread to terminate unexpe...">CommThreadDead</a></td><td>If the background thread has terminated unexpectedly due to an exception. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><code><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f" title="Returns whether the CommThread object is active. ">Active()</a> == true</code> </dd></dl>

</div>
</div>
<a class="anchor" id="acc302077222efbdde0eb78da3b905c7b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StackData &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a>&lt; StackData &gt; &amp; <a class="el" href="classcoral_1_1async_1_1_comm_thread.html">coral::async::CommThread</a>&lt; StackData &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcoral_1_1async_1_1_comm_thread.html">CommThread</a>&lt; StackData &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move assignment operator. </p>
<dl class="section post"><dt>Postcondition</dt><dd><code>other.Active() == false</code> </dd></dl>

</div>
</div>
<a class="anchor" id="aec8ed3c6b46a1c2dd9576c9418c75b6d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StackData &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcoral_1_1async_1_1_comm_thread.html">coral::async::CommThread</a>&lt; StackData &gt;::Shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminates the background thread in a controlled manner. </p>
<p>This function will block until the background thread has terminated. After it returns, the <a class="el" href="classcoral_1_1async_1_1_comm_thread.html" title="Creates and controls a background communications thread. ">CommThread</a> object will be in the "inactive" state.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classcoral_1_1async_1_1_comm_thread_dead.html" title="An exception that signals an error that has caused CommThread&#39;s background thread to terminate unexpe...">CommThreadDead</a></td><td>If the background thread has terminated unexpectedly due to an exception, either before this function was called or during the shutdown procedure. (The latter should usually not happen, as destructors are supposed to be <code>noexcept</code>.) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><code><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f" title="Returns whether the CommThread object is active. ">Active()</a> == true</code> </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code><a class="el" href="classcoral_1_1async_1_1_comm_thread.html#a0736323441fc565dfc11abaad451302f" title="Returns whether the CommThread object is active. ">Active()</a> == false</code> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>coral/<a class="el" href="async_8hpp_source.html">async.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 9 2017 11:21:22 for coral by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
