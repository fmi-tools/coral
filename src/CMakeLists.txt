# Compiler/language settings that apply to only our own code (and not, say,
# the code generated by the Protocol Buffers compiler).
if (CMAKE_COMPILER_IS_GNUCXX)
    add_compile_options("-Wall")                # Enable all warnings
    add_compile_options("-Wno-unused-function") # ...except this one.
    add_compile_options("-Werror")              # Treat all warnings as errors.
elseif (MSVC)
    add_compile_options("/W3")      # Enable warning level 3
    add_compile_options("/WX")      # Treat all warnings as errors.
endif()

# Same, only macro definitions.
if (DSB_ENABLE_DEBUG_LOGGING OR DSB_ENABLE_TRACE_LOGGING)
    set_property (DIRECTORY APPEND PROPERTY
        COMPILE_DEFINITIONS "DSB_LOG_DEBUG_ENABLED")
else ()
    set_property (DIRECTORY APPEND PROPERTY
        COMPILE_DEFINITIONS "$<$<CONFIG:Debug>:DSB_LOG_DEBUG_ENABLED>")
endif ()
if (DSB_ENABLE_TRACE_LOGGING)
    set_property (DIRECTORY APPEND PROPERTY
        COMPILE_DEFINITIONS "DSB_LOG_TRACE_ENABLED")
endif ()
# The directory in which private headers are located.
# These are the headers that should be available to all submodules in this
# project, but which should not be installed as part of the public API.
set (privateHeaderDir "${CMAKE_CURRENT_SOURCE_DIR}/include")

add_subdirectory ("dsb")
add_subdirectory ("dsbexec")
add_subdirectory ("slave")
add_subdirectory ("slave_provider")
